<div class="dashboard-layout">
  <!-- Sidebar -->
  <app-sidebar #sidebar></app-sidebar>

  <!-- Main Content -->
  <div class="main-content" [class.sidebar-expanded]="sidebar.isSidebarExpanded">
    <header class="main-header">
      <div class="header-left">
        <button class="menu-toggle" (click)="sidebar.toggleSidebar()">
          <i class="icon-menu"></i>
        </button>
        <h1 class="page-title">Panel de Administración</h1>
      </div>
      <div class="header-right">
        <button class="refresh-btn" (click)="refreshStats()" [disabled]="isLoading">
          <i class="icon-refresh" [class.spinning]="isLoading"></i>
          <span>Actualizar</span>
        </button>
      </div>
    </header>

    <main class="main-body">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Cargando estadísticas...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !isLoading" class="error-state">
        <i class="icon-warning"></i>
        <p>{{ error }}</p>
        <button class="btn btn-primary" (click)="refreshStats()">Reintentar</button>
      </div>

      <div class="dashboard-grid" *ngIf="!isLoading">
        <!-- Welcome Section -->
        <div class="welcome-section">
          <div class="welcome-header">
            <div class="welcome-content">
              <h2>Bienvenido al Sistema de Gestión de Certificados Digitales</h2>
              <p class="welcome-subtitle">OEFA - Organismo de Evaluación y Fiscalización Ambiental</p>
              <div class="status-badge">
                <i class="icon-check"></i>
                <span>Sistema Operativo</span>
              </div>
            </div>
          </div>
          
          <div class="platform-description">
            <p>Esta plataforma administrativa permite gestionar de manera integral el sistema de certificados digitales y firmas electrónicas de OEFA. Proporciona herramientas para la administración de usuarios firmantes, gestión de certificados digitales .p12, y supervisión de documentos firmados digitalmente, garantizando la seguridad y validez legal de todos los procesos de firma digital dentro de la organización.</p>
          </div>
        </div>

        <!-- Essential Stats -->
        <div class="stats-overview">
          <div class="section-header">
            <h2>Resumen del Sistema</h2>
            <p class="section-subtitle">Estadísticas principales de la plataforma</p>
          </div>
          
          <div class="stats-grid">
            <div class="stat-card users-card">
              <div class="stat-icon">
                <i class="icon-users"></i>
              </div>
              <div class="stat-content">
                <h3>{{ stats.firmantes.totalFirmantes }}</h3>
                <p>Firmantes Registrados</p>
                <div class="stat-breakdown">
                  <span class="active-count">{{ stats.firmantes.activeFirmantes }} Activos</span>
                  <span class="pending-count">{{ stats.firmantes.pendingFirmantes }} Pendientes</span>
                </div>
              </div>
            </div>
            
            <div class="stat-card certificates-card">
              <div class="stat-icon">
                <i class="icon-certificate"></i>
              </div>
              <div class="stat-content">
                <h3>{{ stats.certificates.totalCertificates }}</h3>
                <p>Certificados Digitales</p>
                <div class="stat-breakdown">
                  <span class="valid-count">{{ stats.certificates.validCertificates }} Válidos</span>
                  <span class="invalid-count">{{ stats.certificates.invalidCertificates }} Inválidos</span>
                </div>
              </div>
            </div>
            
            <div class="stat-card documents-card">
              <div class="stat-icon">
                <i class="icon-document"></i>
              </div>
              <div class="stat-content">
                <h3>{{ stats.documents.totalDocuments }}</h3>
                <p>Documentos Procesados</p>
                <div class="stat-breakdown">
                  <span class="signed-count">{{ stats.documents.signedDocuments }} Firmados</span>
                  <span class="visado-count">{{ stats.documents.visadoDocuments }} Visados</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Platform Modules -->
        <div class="modules-overview">
          <div class="section-header">
            <h2>Módulos de la Plataforma</h2>
            <p class="section-subtitle">Principales funcionalidades disponibles en el sistema</p>
          </div>
          
          <div class="modules-grid">
            <div class="module-card">
              <div class="module-icon users-module">
                <i class="icon-users"></i>
              </div>
              <div class="module-content">
                <h4>Gestión de Usuarios</h4>
                <p>Administración completa de firmantes, creación de cuentas, gestión de perfiles y configuración de permisos de acceso al sistema.</p>
              </div>
            </div>
            
            <div class="module-card">
              <div class="module-icon certificates-module">
                <i class="icon-certificate"></i>
              </div>
              <div class="module-content">
                <h4>Certificados Digitales</h4>
                <p>Carga, validación y administración de certificados digitales .p12, con verificación de vigencia y estados de validación automática.</p>
              </div>
            </div>
            
            <div class="module-card">
              <div class="module-icon documents-module">
                <i class="icon-document"></i>
              </div>
              <div class="module-content">
                <h4>Documentos Firmados</h4>
                <p>Supervisión y administración de todos los documentos que han sido procesados mediante firma digital o visado electrónico.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>