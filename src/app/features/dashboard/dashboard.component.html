<div class="dashboard-layout">
  <!-- Sidebar -->
  <nav class="sidebar" [class.expanded]="isSidebarExpanded">
    <div class="sidebar-header">
      <div class="sidebar-logo">
        <div class="logo-icon">
          <span class="logo-text">OEFA</span>
        </div>
        <div class="logo-info" *ngIf="isSidebarExpanded">
          <h3>Sistema de Firmas</h3>
          <p>Certificados Digitales</p>
        </div>
      </div>
      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <i class="icon-menu"></i>
      </button>
    </div>

    <div class="sidebar-content">
      <div class="sidebar-user">
        <div class="user-avatar">
          <span>{{ getUserInitials() }}</span>
        </div>
        <div class="user-info" *ngIf="isSidebarExpanded">
          <h4>{{ getUserDisplayName() }}</h4>
          <p>{{ getRoleDisplayName() }}</p>
          <span class="user-status">{{ currentUser?.status }}</span>
        </div>
      </div>

      <div class="sidebar-menu">
        <ul class="menu-list">
          <li class="menu-item" *ngFor="let item of getVisibleMenuItems()">
            <a 
              [routerLink]="item.route" 
              routerLinkActive="active" 
              class="menu-link">
              <i class="menu-icon icon-{{ item.icon }}"></i>
              <span class="menu-text" *ngIf="isSidebarExpanded">{{ item.title }}</span>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()">
        <i class="icon-logout"></i>
        <span *ngIf="isSidebarExpanded">Cerrar Sesión</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="main-content" [class.sidebar-expanded]="isSidebarExpanded">
    <header class="main-header">
      <div class="header-left">
        <button class="menu-toggle" (click)="toggleSidebar()">
          <i class="icon-menu"></i>
        </button>
        <h1 class="page-title">Panel de Administración</h1>
      </div>
      
      <div class="header-right">
        <div class="header-actions">
          <button class="header-action">
            <i class="icon-bell"></i>
            <span class="notification-badge">3</span>
          </button>
          <button class="header-action">
            <i class="icon-settings"></i>
          </button>
        </div>
        
        <div class="user-menu">
          <div class="user-avatar">
            <span>{{ getUserInitials() }}</span>
          </div>
          <div class="user-details">
            <span class="user-name">{{ getUserDisplayName() }}</span>
            <span class="user-role">{{ getRoleDisplayName() }}</span>
          </div>
        </div>
      </div>
    </header>

    <main class="main-body">
      <div class="dashboard-grid">
        <!-- Welcome Section -->
        <div class="welcome-section">
          <div class="welcome-header">
            <div class="welcome-icon">
              <i class="icon-home"></i>
            </div>
            <div class="welcome-content">
              <h2>Bienvenido al Sistema de Gestión de Certificados Digitales</h2>
              <p class="welcome-subtitle">OEFA - Organismo de Evaluación y Fiscalización Ambiental</p>
            </div>
          </div>
          
          <div class="welcome-description">
            <p>Esta plataforma administrativa te permite gestionar de manera integral el sistema de certificados digitales y firmas electrónicas de OEFA. A través de este panel podrás:</p>
            
            <div class="features-grid">
              <div class="feature-item">
                <i class="icon-certificate"></i>
                <h4>Gestión de Certificados</h4>
                <p>Crear, visualizar, editar y eliminar certificados digitales .p12 de los usuarios del sistema.</p>
              </div>
              
              <div class="feature-item">
                <i class="icon-users"></i>
                <h4>Administración de Usuarios</h4>
                <p>Gestionar usuarios firmantes, crear nuevas cuentas, modificar información y administrar permisos.</p>
              </div>
              
              <div class="feature-item">
                <i class="icon-document"></i>
                <h4>Documentos Firmados</h4>
                <p>Visualizar y administrar todos los documentos que han sido firmados digitalmente por los usuarios.</p>
              </div>
              
              <div class="feature-item">
                <i class="icon-shield"></i>
                <h4>Seguridad y Auditoría</h4>
                <p>Monitorear la seguridad del sistema y revisar logs de auditoría para garantizar la integridad.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="icon-certificate"></i>
            </div>
            <div class="stat-content">
              <h3>12</h3>
              <p>Certificados Activos</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <i class="icon-users"></i>
            </div>
            <div class="stat-content">
              <h3>8</h3>
              <p>Usuarios Registrados</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <i class="icon-document"></i>
            </div>
            <div class="stat-content">
              <h3>25</h3>
              <p>Documentos Firmados</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <i class="icon-shield"></i>
            </div>
            <div class="stat-content">
              <h3>100%</h3>
              <p>Seguridad</p>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="activity-section">
          <div class="section-header">
            <h2>Actividad Reciente</h2>
            <button class="btn btn-outline btn-sm">Ver Todo</button>
          </div>
          
          <div class="activity-list">
            <div class="activity-item">
              <div class="activity-icon">
                <i class="icon-upload"></i>
              </div>
              <div class="activity-content">
                <h4>Certificado subido</h4>
                <p>Juan Pérez subió un nuevo certificado</p>
                <span class="activity-time">Hace 2 horas</span>
              </div>
            </div>
            
            <div class="activity-item">
              <div class="activity-icon">
                <i class="icon-user-add"></i>
              </div>
              <div class="activity-content">
                <h4>Nuevo usuario</h4>
                <p>María García fue registrada como firmante</p>
                <span class="activity-time">Hace 4 horas</span>
              </div>
            </div>
            
            <div class="activity-item">
              <div class="activity-icon">
                <i class="icon-warning"></i>
              </div>
              <div class="activity-content">
                <h4>Certificado por expirar</h4>
                <p>El certificado de Carlos López expira en 7 días</p>
                <span class="activity-time">Hace 1 día</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
          <div class="section-header">
            <h2>Acciones Rápidas</h2>
          </div>
          
          <div class="actions-grid">
            <button class="action-card" routerLink="/certificates">
              <i class="icon-certificate"></i>
              <span>Gestionar Certificados</span>
            </button>
            
            <button class="action-card" routerLink="/users" *ngIf="currentUser?.role === 'ROLE_ADMIN'">
              <i class="icon-users"></i>
              <span>Gestionar Usuarios</span>
            </button>
            
            <button class="action-card" routerLink="/signed-documents" *ngIf="currentUser?.role === 'ROLE_ADMIN'">
              <i class="icon-document"></i>
              <span>Documentos Firmados</span>
            </button>
            
            <button class="action-card" routerLink="/security" *ngIf="currentUser?.role === 'ROLE_ADMIN'">
              <i class="icon-shield"></i>
              <span>Panel de Seguridad</span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>